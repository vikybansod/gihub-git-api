@Library('jenkins-shared-lib') _

pipeline {

    agent {
        kubernetes {
            image 'docker:24.0.7-dind' // Specific DinD image
            args '--privileged'        // Required for DinD to run the daemon
        }
    }

    environment {
        ENV = 'uat'
    }

    stages {

        stage('Load Config') {
            steps {
                container('infra') {
                    script {
                        ls -al && pwd && docker -v
                        }
                    }
                }
            }
        }
}